{"remainingRequest":"D:\\summer\\restaurant\\node_modules\\babel-loader\\lib\\index.js!D:\\summer\\restaurant\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\summer\\restaurant\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\summer\\restaurant\\src\\components\\Tags.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\summer\\restaurant\\src\\components\\Tags.vue","mtime":1624883978000},{"path":"D:\\summer\\restaurant\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\summer\\restaurant\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\summer\\restaurant\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\summer\\restaurant\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgb25CZWZvcmVSb3V0ZVVwZGF0ZSwgdXNlUm91dGUsIHVzZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgICB2YXIgaXNBY3RpdmUgPSBmdW5jdGlvbiBpc0FjdGl2ZShwYXRoKSB7CiAgICAgIHJldHVybiBwYXRoID09PSByb3V0ZS5mdWxsUGF0aDsKICAgIH07CgogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIHZhciB0YWdzTGlzdCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLnRhZ3NMaXN0OwogICAgfSk7CiAgICB2YXIgc2hvd1RhZ3MgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0YWdzTGlzdC52YWx1ZS5sZW5ndGggPiAwOwogICAgfSk7IC8vIOWFs+mXreWNleS4quagh+etvgoKICAgIHZhciBjbG9zZVRhZ3MgPSBmdW5jdGlvbiBjbG9zZVRhZ3MoaW5kZXgpIHsKICAgICAgdmFyIGRlbEl0ZW0gPSB0YWdzTGlzdC52YWx1ZVtpbmRleF07CiAgICAgIHN0b3JlLmNvbW1pdCgiZGVsVGFnc0l0ZW0iLCB7CiAgICAgICAgaW5kZXg6IGluZGV4CiAgICAgIH0pOwogICAgICB2YXIgaXRlbSA9IHRhZ3NMaXN0LnZhbHVlW2luZGV4XSA/IHRhZ3NMaXN0LnZhbHVlW2luZGV4XSA6IHRhZ3NMaXN0LnZhbHVlW2luZGV4IC0gMV07CgogICAgICBpZiAoaXRlbSkgewogICAgICAgIGRlbEl0ZW0ucGF0aCA9PT0gcm91dGUuZnVsbFBhdGggJiYgcm91dGVyLnB1c2goaXRlbS5wYXRoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByb3V0ZXIucHVzaCgiLyIpOwogICAgICB9CiAgICB9OyAvLyDorr7nva7moIfnrb4KCgogICAgdmFyIHNldFRhZ3MgPSBmdW5jdGlvbiBzZXRUYWdzKHJvdXRlKSB7CiAgICAgIHZhciBpc0V4aXN0ID0gdGFnc0xpc3QudmFsdWUuc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnBhdGggPT09IHJvdXRlLmZ1bGxQYXRoOwogICAgICB9KTsKCiAgICAgIGlmICghaXNFeGlzdCkgewogICAgICAgIGlmICh0YWdzTGlzdC52YWx1ZS5sZW5ndGggPj0gOCkgewogICAgICAgICAgc3RvcmUuY29tbWl0KCJkZWxUYWdzSXRlbSIsIHsKICAgICAgICAgICAgaW5kZXg6IDAKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgc3RvcmUuY29tbWl0KCJzZXRUYWdzSXRlbSIsIHsKICAgICAgICAgIG5hbWU6IHJvdXRlLm5hbWUsCiAgICAgICAgICB0aXRsZTogcm91dGUubWV0YS50aXRsZSwKICAgICAgICAgIHBhdGg6IHJvdXRlLmZ1bGxQYXRoCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CgogICAgc2V0VGFncyhyb3V0ZSk7CiAgICBvbkJlZm9yZVJvdXRlVXBkYXRlKGZ1bmN0aW9uICh0bykgewogICAgICBzZXRUYWdzKHRvKTsKICAgIH0pOyAvLyDlhbPpl63lhajpg6jmoIfnrb4KCiAgICB2YXIgY2xvc2VBbGwgPSBmdW5jdGlvbiBjbG9zZUFsbCgpIHsKICAgICAgc3RvcmUuY29tbWl0KCJjbGVhclRhZ3MiKTsKICAgICAgcm91dGVyLnB1c2goIi8iKTsKICAgIH07IC8vIOWFs+mXreWFtuS7luagh+etvgoKCiAgICB2YXIgY2xvc2VPdGhlciA9IGZ1bmN0aW9uIGNsb3NlT3RoZXIoKSB7CiAgICAgIHZhciBjdXJJdGVtID0gdGFnc0xpc3QudmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gcm91dGUuZnVsbFBhdGg7CiAgICAgIH0pOwogICAgICBzdG9yZS5jb21taXQoImNsb3NlVGFnc090aGVyIiwgY3VySXRlbSk7CiAgICB9OwoKICAgIHZhciBoYW5kbGVUYWdzID0gZnVuY3Rpb24gaGFuZGxlVGFncyhjb21tYW5kKSB7CiAgICAgIGNvbW1hbmQgPT09ICJvdGhlciIgPyBjbG9zZU90aGVyKCkgOiBjbG9zZUFsbCgpOwogICAgfTsgLy8g5YWz6Zet5b2T5YmN6aG16Z2i55qE5qCH562+6aG1CiAgICAvLyBzdG9yZS5jb21taXQoImNsb3NlQ3VycmVudFRhZyIsIHsKICAgIC8vICAgICAkcm91dGVyOiByb3V0ZXIsCiAgICAvLyAgICAgJHJvdXRlOiByb3V0ZQogICAgLy8gfSk7CgoKICAgIHJldHVybiB7CiAgICAgIGlzQWN0aXZlOiBpc0FjdGl2ZSwKICAgICAgdGFnc0xpc3Q6IHRhZ3NMaXN0LAogICAgICBzaG93VGFnczogc2hvd1RhZ3MsCiAgICAgIGNsb3NlVGFnczogY2xvc2VUYWdzLAogICAgICBoYW5kbGVUYWdzOiBoYW5kbGVUYWdzCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["Tags.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"tags\" v-if=\"showTags\">\n        <ul>\n            <li class=\"tags-li\" v-for=\"(item,index) in tagsList\" :class=\"{'active': isActive(item.path)}\" :key=\"index\">\n                <router-link :to=\"item.path\" class=\"tags-li-title\">{{item.title}}</router-link>\n                <span class=\"tags-li-icon\" @click=\"closeTags(index)\">\n                    <i class=\"el-icon-close\"></i>\n                </span>\n            </li>\n        </ul>\n        <div class=\"tags-close-box\">\n            <el-dropdown @command=\"handleTags\">\n                <el-button size=\"mini\" type=\"primary\">\n                    标签选项\n                    <i class=\"el-icon-arrow-down el-icon--right\"></i>\n                </el-button>\n                <template #dropdown>\n                    <el-dropdown-menu size=\"small\">\n                        <el-dropdown-item command=\"other\">关闭其他</el-dropdown-item>\n                        <el-dropdown-item command=\"all\">关闭所有</el-dropdown-item>\n                    </el-dropdown-menu>\n                </template>\n            </el-dropdown>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { computed } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { onBeforeRouteUpdate, useRoute, useRouter } from \"vue-router\";\nexport default {\n    setup() {\n        const route = useRoute();\n        const router = useRouter();\n        const isActive = (path) => {\n            return path === route.fullPath;\n        };\n\n        const store = useStore();\n        const tagsList = computed(() => store.state.tagsList);\n        const showTags = computed(() => tagsList.value.length > 0);\n\n        // 关闭单个标签\n        const closeTags = (index) => {\n            const delItem = tagsList.value[index];\n            store.commit(\"delTagsItem\", { index });\n            const item = tagsList.value[index]\n                ? tagsList.value[index]\n                : tagsList.value[index - 1];\n            if (item) {\n                delItem.path === route.fullPath && router.push(item.path);\n            } else {\n                router.push(\"/\");\n            }\n        };\n\n        // 设置标签\n        const setTags = (route) => {\n            const isExist = tagsList.value.some((item) => {\n                return item.path === route.fullPath;\n            });\n            if (!isExist) {\n                if (tagsList.value.length >= 8) {\n                    store.commit(\"delTagsItem\", { index: 0 });\n                }\n                store.commit(\"setTagsItem\", {\n                    name: route.name,\n                    title: route.meta.title,\n                    path: route.fullPath,\n                });\n            }\n        };\n        setTags(route);\n        onBeforeRouteUpdate((to) => {\n            setTags(to);\n        });\n\n        // 关闭全部标签\n        const closeAll = () => {\n            store.commit(\"clearTags\");\n            router.push(\"/\");\n        };\n        // 关闭其他标签\n        const closeOther = () => {\n            const curItem = tagsList.value.filter((item) => {\n                return item.path === route.fullPath;\n            });\n            store.commit(\"closeTagsOther\", curItem);\n        };\n        const handleTags = (command) => {\n            command === \"other\" ? closeOther() : closeAll();\n        };\n\n        // 关闭当前页面的标签页\n        // store.commit(\"closeCurrentTag\", {\n        //     $router: router,\n        //     $route: route\n        // });\n\n        return {\n            isActive,\n            tagsList,\n            showTags,\n            closeTags,\n            handleTags,\n        };\n    },\n};\n</script>\n\n\n<style>\n.tags {\n    position: relative;\n    height: 30px;\n    overflow: hidden;\n    background: #fff;\n    padding-right: 120px;\n    box-shadow: 0 5px 10px #ddd;\n}\n\n.tags ul {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n}\n\n.tags-li {\n    float: left;\n    margin: 3px 5px 2px 3px;\n    border-radius: 3px;\n    font-size: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    height: 23px;\n    line-height: 23px;\n    border: 1px solid #e9eaec;\n    background: #fff;\n    padding: 0 5px 0 12px;\n    vertical-align: middle;\n    color: #666;\n    -webkit-transition: all 0.3s ease-in;\n    -moz-transition: all 0.3s ease-in;\n    transition: all 0.3s ease-in;\n}\n\n.tags-li:not(.active):hover {\n    background: #f8f8f8;\n}\n\n.tags-li.active {\n    color: #fff;\n}\n\n.tags-li-title {\n    float: left;\n    max-width: 80px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    margin-right: 5px;\n    color: #666;\n}\n\n.tags-li.active .tags-li-title {\n    color: #fff;\n}\n\n.tags-close-box {\n    position: absolute;\n    right: 0;\n    top: 0;\n    box-sizing: border-box;\n    padding-top: 1px;\n    text-align: center;\n    width: 110px;\n    height: 30px;\n    background: #fff;\n    box-shadow: -3px 0 15px 3px rgba(0, 0, 0, 0.1);\n    z-index: 10;\n}\n</style>\n"],"sourceRoot":"src/components"}]}